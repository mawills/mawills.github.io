{"version":3,"sources":["webpack://evo-war/./js/alien.ts","webpack://evo-war/./js/cell.ts","webpack://evo-war/./js/configuration.ts","webpack://evo-war/./js/dom.ts","webpack://evo-war/./js/floatingText.ts","webpack://evo-war/./js/game.ts","webpack://evo-war/./js/gameObject.ts","webpack://evo-war/./js/mouse.ts","webpack://evo-war/./js/population.ts","webpack://evo-war/./js/projectile.ts","webpack://evo-war/./js/tower.ts","webpack://evo-war/./js/util.ts","webpack://evo-war/webpack/bootstrap","webpack://evo-war/./js/main.ts"],"names":[],"mappings":";;;;;;;;;;AAAa;AACb;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,8EAA8E;AAC3G;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA6C,CAAC,cAAc,EAAC;AAC7D,mBAAmB,mBAAO,CAAC,wCAAc;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,eAAe;;;;;;;;;;;AC/CF;AACb;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,8EAA8E;AAC3G;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD,8CAA6C,CAAC,cAAc,EAAC;AAC7D,mBAAmB,mBAAO,CAAC,wCAAc;AACzC,aAAa,mBAAO,CAAC,4BAAQ;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,eAAe;;;;;;;;;;;AC3CF;AACb,8CAA6C,CAAC,cAAc,EAAC;AAC7D,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;;;;;;;;;;AC9Ca;AACb,8CAA6C,CAAC,cAAc,EAAC;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,eAAe;;;;;;;;;;;ACtBF;AACb,8CAA6C,CAAC,cAAc,EAAC;AAC7D,sBAAsB,mBAAO,CAAC,8CAAiB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,eAAe;;;;;;;;;;;AClCF;AACb;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA,8CAA6C,CAAC,cAAc,EAAC;AAC7D,aAAa,mBAAO,CAAC,4BAAQ;AAC7B,cAAc,mBAAO,CAAC,8BAAS;AAC/B,cAAc,mBAAO,CAAC,8BAAS;AAC/B,sBAAsB,mBAAO,CAAC,8CAAiB;AAC/C,qBAAqB,mBAAO,CAAC,4CAAgB;AAC7C,mBAAmB,mBAAO,CAAC,wCAAc;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,uBAAuB,wBAAwB;AAC/C,2BAA2B,uBAAuB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,UAAU;AACxE;AACA;AACA;AACA;AACA;AACA,uBAAuB,QAAQ,gBAAgB;AAC/C;AACA;AACA;AACA;AACA,qBAAqB,0BAA0B;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,+BAA+B,iBAAiB;AAChD;AACA;AACA;AACA,CAAC;AACD,eAAe;;;;;;;;;;;AClTF;AACb,8CAA6C,CAAC,cAAc,EAAC;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C,6CAA6C;AAC7C;AACA,CAAC;AACD,eAAe;;;;;;;;;;;ACdF;AACb,8CAA6C,CAAC,cAAc,EAAC;AAC7D,sBAAsB,mBAAO,CAAC,8CAAiB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,gBAAgB;AAC3C,2BAA2B,iBAAiB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,eAAe;;;;;;;;;;;ACpBF;AACb,8CAA6C,CAAC,cAAc,EAAC;AAC7D,sBAAsB,mBAAO,CAAC,8CAAiB;AAC/C,cAAc,mBAAO,CAAC,8BAAS;AAC/B,aAAa,mBAAO,CAAC,4BAAQ;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,OAAO;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,OAAO;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,CAAC;AACD,eAAe;;;;;;;;;;;ACnEF;AACb;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,8EAA8E;AAC3G;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA,8CAA6C,CAAC,cAAc,EAAC;AAC7D,mBAAmB,mBAAO,CAAC,wCAAc;AACzC,aAAa,mBAAO,CAAC,4BAAQ;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8EAA8E,UAAU;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,QAAQ,gBAAgB;AAC/C;AACA;AACA;AACA;AACA,qBAAqB,0BAA0B;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,eAAe;;;;;;;;;;;AC/FF;AACb;AACA;AACA;AACA,cAAc,gBAAgB,sCAAsC,iBAAiB,EAAE;AACvF,6BAA6B,8EAA8E;AAC3G;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA,8CAA6C,CAAC,cAAc,EAAC;AAC7D,yBAAyB,GAAG,uBAAuB;AACnD,sBAAsB,mBAAO,CAAC,8CAAiB;AAC/C,mBAAmB,mBAAO,CAAC,wCAAc;AACzC,mBAAmB,mBAAO,CAAC,wCAAc;AACzC,aAAa,mBAAO,CAAC,4BAAQ;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kFAAkF,UAAU;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,QAAQ,gBAAgB;AACnD;AACA;AACA;AACA;AACA,yBAAyB,0BAA0B;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kFAAkF,UAAU;AAC5F;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,QAAQ,gBAAgB;AACnD;AACA;AACA;AACA;AACA,yBAAyB,0BAA0B;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,yBAAyB;;;;;;;;;;;ACvQZ;AACb,8CAA6C,CAAC,cAAc,EAAC;AAC7D,yBAAyB,GAAG,2BAA2B,GAAG,0BAA0B;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA,yBAAyB;;;;;;;UCxBzB;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;;;;;;ACtBa;AACb,8CAA6C,CAAC,cAAc,EAAC;AAC7D,YAAY,mBAAO,CAAC,0BAAO;AAC3B,aAAa,mBAAO,CAAC,4BAAQ;AAC7B;AACA;AACA","file":"bundle.js","sourcesContent":["\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar gameObject_1 = require(\"./gameObject\");\r\nvar Alien = /** @class */ (function (_super) {\r\n    __extends(Alien, _super);\r\n    function Alien(game, y, width, height, health, speed) {\r\n        var _this = _super.call(this, game, game.canvas.width, y, width, height) || this;\r\n        _this.id = Math.random();\r\n        _this.speed = speed;\r\n        _this.movement = _this.speed;\r\n        _this.health = health;\r\n        _this.maxHealth = _this.health;\r\n        _this.lootValue = 20;\r\n        return _this;\r\n    }\r\n    Alien.prototype.alive = function () {\r\n        return this.health > 0;\r\n    };\r\n    Alien.prototype.update = function () {\r\n        this.x -= this.movement;\r\n    };\r\n    Alien.prototype.draw = function () {\r\n        this.game.ctx.save();\r\n        this.game.ctx.fillStyle = \"red\";\r\n        this.game.ctx.fillRect(this.x, this.y, this.width, this.height);\r\n        this.game.ctx.fillStyle = \"black\";\r\n        this.game.ctx.font = \"30px Arial\";\r\n        this.game.ctx.fillText(Math.floor(this.health) + \"/\" + Math.floor(this.maxHealth), this.x + 15, this.y + 30);\r\n        this.game.ctx.restore();\r\n    };\r\n    return Alien;\r\n}(gameObject_1.default));\r\nexports.default = Alien;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar gameObject_1 = require(\"./gameObject\");\r\nvar util_1 = require(\"./util\");\r\nvar Cell = /** @class */ (function (_super) {\r\n    __extends(Cell, _super);\r\n    function Cell(game, x, y, width, height) {\r\n        var _this = _super.call(this, game, x, y, width, height) || this;\r\n        _this.highlighted = false;\r\n        return _this;\r\n    }\r\n    Cell.prototype.update = function () {\r\n        this.game.mouse.x &&\r\n            this.game.mouse.y &&\r\n            util_1.collisionDetection(this, this.game.mouse)\r\n            ? (this.highlighted = true)\r\n            : (this.highlighted = false);\r\n    };\r\n    Cell.prototype.draw = function () {\r\n        this.game.ctx.save();\r\n        if (this.highlighted) {\r\n            this.game.ctx.strokeStyle = \"black\";\r\n            this.game.ctx.strokeRect(this.x, this.y, this.width, this.height);\r\n        }\r\n        this.game.ctx.restore();\r\n    };\r\n    return Cell;\r\n}(gameObject_1.default));\r\nexports.default = Cell;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.default = {\r\n    CELL_SIZE: 50,\r\n    CELL_GAP: 0,\r\n    CANVAS_WIDTH: 1350,\r\n    CANVAS_HEIGHT: 900,\r\n    ENEMY_STARTING_POPULATION: 25,\r\n    STARTING_WAVE_SIZE: 10,\r\n    MIN_WAVE_SIZE: 20,\r\n    INITIAL_SPAWN_INTERVAL: 6000,\r\n    MIN_SPAWN_INTERVAL: 600,\r\n    SPAWN_INTERVAL_DECREMENT: 200,\r\n    PLAYER_STARTING_RESOURCES: 500,\r\n    FLOATING_TEXT_LIFESPAN: 50,\r\n    ALIEN_TRAITS: {\r\n        MAX_HEIGHT: 100,\r\n        MIN_HEIGHT: 20,\r\n        MAX_WIDTH: 100,\r\n        MIN_WIDTH: 20,\r\n        MAX_HEALTH: 300,\r\n        MIN_HEALTH: 50,\r\n        MAX_SPEED: 1.5,\r\n        MIN_SPEED: 0.1,\r\n    },\r\n    MOUSE_CONFIG: {\r\n        MOUSE_STARTING_X: -1,\r\n        MOUSE_STARTING_Y: -1,\r\n        MOUSE_WIDTH: 0.1,\r\n        MOUSE_HEIGHT: 0.1,\r\n    },\r\n    MACHINE_GUN_TOWER_STATS: {\r\n        cost: [100, 150, 300],\r\n        range: [500, 525, 550],\r\n        cooldown: [175, 150, 125],\r\n        projectileSpeed: [7, 7, 7],\r\n        power: [5, 7, 10],\r\n    },\r\n    FLAMETHROWER_TOWER_STATS: {\r\n        cost: [125, 175, 350],\r\n        range: [200, 210, 220],\r\n        cooldown: [5, 5, 5],\r\n        projectileSpeed: [15, 17, 20],\r\n        projectileSize: [10, 15, 20],\r\n        power: [0.5, 1, 3],\r\n    },\r\n};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Dom = /** @class */ (function () {\r\n    function Dom() {\r\n        this.canvas = document.getElementById(\"canvas\");\r\n        if (!this.canvas)\r\n            throw new Error(\"could not find canvas element\");\r\n        this.nextWaveButton = (document.getElementById(\"next-wave\"));\r\n        if (!this.nextWaveButton)\r\n            throw new Error(\"could not find next wave button\");\r\n        this.stats = document.getElementById(\"stats\");\r\n        if (!this.stats)\r\n            throw new Error(\"could not find stats element\");\r\n        this.towerSelector = (document.getElementById(\"tower-selector\"));\r\n        if (!this.towerSelector)\r\n            throw new Error(\"could not find tower selector element\");\r\n        this.towerStats = document.getElementById(\"tower-stats\");\r\n        if (!this.towerStats)\r\n            throw new Error(\"could not find tower stats element\");\r\n    }\r\n    return Dom;\r\n}());\r\nexports.default = Dom;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar configuration_1 = require(\"./configuration\");\r\nvar FloatingText = /** @class */ (function () {\r\n    function FloatingText(game, text, x, y, size, color) {\r\n        this.game = game;\r\n        this.text = text;\r\n        this.x = x;\r\n        this.y = y;\r\n        this.size = size;\r\n        this.color = color;\r\n        this.age = 0;\r\n        this.opacity = 1;\r\n    }\r\n    FloatingText.prototype.expired = function () {\r\n        return this.age >= configuration_1.default.FLOATING_TEXT_LIFESPAN;\r\n    };\r\n    FloatingText.prototype.update = function () {\r\n        this.y -= 0.3;\r\n        this.age += 1;\r\n        if (this.opacity > 0.05)\r\n            this.opacity -= 0.02;\r\n    };\r\n    FloatingText.prototype.draw = function () {\r\n        this.game.ctx.save();\r\n        this.game.ctx.globalAlpha = this.opacity;\r\n        this.game.ctx.fillStyle = this.color;\r\n        this.game.ctx.font = this.size + \"px Arial\";\r\n        this.game.ctx.fillText(this.text, this.x, this.y);\r\n        this.game.ctx.globalAlpha = 1;\r\n        this.game.ctx.restore();\r\n    };\r\n    return FloatingText;\r\n}());\r\nexports.default = FloatingText;\r\n","\"use strict\";\r\nvar __values = (this && this.__values) || function(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar cell_1 = require(\"./cell\");\r\nvar mouse_1 = require(\"./mouse\");\r\nvar tower_1 = require(\"./tower\");\r\nvar configuration_1 = require(\"./configuration\");\r\nvar floatingText_1 = require(\"./floatingText\");\r\nvar population_1 = require(\"./population\");\r\nvar Game = /** @class */ (function () {\r\n    function Game(dom) {\r\n        var _this = this;\r\n        this.animate = function () {\r\n            _this.ctx.clearRect(0, 0, _this.canvas.width, _this.canvas.height);\r\n            _this.handleGrid();\r\n            _this.handleTowers();\r\n            _this.handleProjectiles();\r\n            _this.handleAliens();\r\n            _this.handleFloatingTexts();\r\n            _this.handleAttackWave();\r\n            _this.handleGameStatsBar();\r\n            if (!_this.gameOver)\r\n                requestAnimationFrame(_this.animate);\r\n        };\r\n        // dom\r\n        this.nextWaveButton = dom.nextWaveButton;\r\n        this.stats = dom.stats;\r\n        this.towerStats = dom.towerStats;\r\n        this.towerSelector = dom.towerSelector;\r\n        // canvas\r\n        this.canvas = dom.canvas;\r\n        this.canvas.width = configuration_1.default.CANVAS_WIDTH;\r\n        this.canvas.height = configuration_1.default.CANVAS_HEIGHT;\r\n        var ctx = this.canvas.getContext(\"2d\");\r\n        if (!ctx)\r\n            throw new Error(\"Failed to get canvas context\");\r\n        this.ctx = ctx;\r\n        // grid\r\n        this.grid = [];\r\n        // game objects\r\n        this.towers = new Map();\r\n        this.aliens = new Map();\r\n        this.projectiles = [];\r\n        this.floatingTexts = [];\r\n        // alien population\r\n        this.population = new population_1.default(this, configuration_1.default.ENEMY_STARTING_POPULATION);\r\n        this.attackWave = [];\r\n        // stats\r\n        this.numResources = configuration_1.default.PLAYER_STARTING_RESOURCES;\r\n        this.numKills = 0;\r\n        this.waveCount = 0;\r\n        // wave control\r\n        this.waveInProgress = false;\r\n        this.alienSpawnInterval = configuration_1.default.INITIAL_SPAWN_INTERVAL;\r\n        this.waveSize = configuration_1.default.STARTING_WAVE_SIZE;\r\n        this.lastSpawnedTime = 0;\r\n        // controls bar\r\n        this.selectedTowerCard = \"\";\r\n        // mouse\r\n        this.mouse = new mouse_1.default();\r\n        // game status\r\n        this.gameStarted = false;\r\n        this.gameOver = false;\r\n        this.initializeGrid();\r\n        this.initializeControlsBar();\r\n        this.handleMouse();\r\n        this.handleCanvasClicks();\r\n        this.handleNextWaveButton();\r\n    }\r\n    Game.prototype.start = function () {\r\n        this.animate();\r\n    };\r\n    Game.prototype.handleMouse = function () {\r\n        var _this = this;\r\n        this.canvas.addEventListener(\"mousemove\", function (e) {\r\n            var canvasPosition = _this.canvas.getBoundingClientRect();\r\n            _this.mouse.update(e.x - canvasPosition.left, e.y - canvasPosition.top);\r\n        });\r\n        this.canvas.addEventListener(\"mouseleave\", function () {\r\n            _this.mouse.update(0, 0);\r\n        });\r\n    };\r\n    Game.prototype.initializeControlsBar = function () {\r\n        var _this = this;\r\n        var temp = Array.from(this.towerSelector.children);\r\n        temp.forEach(function (child) {\r\n            child.onclick = function () {\r\n                if (_this.selectedTowerCard == child.innerText) {\r\n                    _this.selectedTowerCard = \"\";\r\n                    _this.towerStats.innerText = \"\";\r\n                }\r\n                else {\r\n                    _this.selectedTowerCard = child.innerText;\r\n                    switch (child.innerText) {\r\n                        case \"machine gun tower\":\r\n                            _this.towerStats.innerText = \"cost: \" + configuration_1.default.MACHINE_GUN_TOWER_STATS.cost[0];\r\n                            break;\r\n                        case \"flamethrower tower\":\r\n                            _this.towerStats.innerText = \"cost: \" + configuration_1.default.FLAMETHROWER_TOWER_STATS.cost[0];\r\n                            break;\r\n                        default:\r\n                            _this.towerStats.innerText = \"selected \" + _this.selectedTowerCard;\r\n                            break;\r\n                    }\r\n                }\r\n            };\r\n        });\r\n    };\r\n    Game.prototype.purchaseTower = function (towerId, gridCellX, gridCellY) {\r\n        var newTower;\r\n        switch (this.selectedTowerCard) {\r\n            case \"machine gun tower\":\r\n                newTower = new tower_1.MachineGunTower(this, gridCellX, gridCellY);\r\n                break;\r\n            case \"flamethrower tower\":\r\n                newTower = new tower_1.FlamethrowerTower(this, gridCellX, gridCellY);\r\n                break;\r\n            default:\r\n                return;\r\n        }\r\n        if (newTower.cost >= this.numResources) {\r\n            this.createFloatingText(\"insufficient resources\", this.mouse.x, this.mouse.y);\r\n        }\r\n        else {\r\n            this.numResources -= newTower.cost;\r\n            this.selectedTowerCard = \"\";\r\n            this.towerStats.innerText = \"\";\r\n            this.towers.set(towerId, newTower);\r\n        }\r\n    };\r\n    Game.prototype.selectTower = function (towerId) {\r\n        var _this = this;\r\n        this.towerStats.innerHTML = \"\";\r\n        var tower = this.towers.get(towerId);\r\n        if (tower instanceof tower_1.MachineGunTower ||\r\n            tower instanceof tower_1.FlamethrowerTower) {\r\n            this.towerStats.innerHTML = \"<ul>\\n        <li>power: \" + tower.power + \"</li>\\n        <li>range: \" + tower.range + \"</li>\\n        <li>cooldown: \" + tower.cooldown + \"</li>\\n      </ul>\";\r\n            var upgradeCost_1 = configuration_1.default.MACHINE_GUN_TOWER_STATS.cost[tower.level];\r\n            if (upgradeCost_1) {\r\n                var upgradeButton = document.createElement(\"button\");\r\n                upgradeButton.innerText = \"upgrade: \" + upgradeCost_1;\r\n                upgradeButton.addEventListener(\"click\", function () {\r\n                    if (_this.numResources >= upgradeCost_1) {\r\n                        tower.upgrade();\r\n                        _this.selectTower(towerId);\r\n                    }\r\n                    else {\r\n                        _this.createFloatingText(\"insufficient resources\", tower.x, tower.y);\r\n                    }\r\n                });\r\n                this.towerStats.appendChild(upgradeButton);\r\n            }\r\n        }\r\n    };\r\n    Game.prototype.handleCanvasClicks = function () {\r\n        var _this = this;\r\n        this.canvas.addEventListener(\"click\", function () {\r\n            var gridCellX = _this.mouse.x - (_this.mouse.x % configuration_1.default.CELL_SIZE);\r\n            var gridCellY = _this.mouse.y - (_this.mouse.y % configuration_1.default.CELL_SIZE);\r\n            var towerId = gridCellX + \",\" + gridCellY;\r\n            if (_this.towers.has(towerId)) {\r\n                _this.selectedTowerCard = \"\";\r\n                _this.selectTower(towerId);\r\n            }\r\n            if (_this.selectedTowerCard.length > 0 && !_this.towers.has(towerId)) {\r\n                _this.purchaseTower(towerId, gridCellX, gridCellY);\r\n            }\r\n        });\r\n    };\r\n    Game.prototype.handleNextWaveButton = function () {\r\n        var _this = this;\r\n        this.nextWaveButton.addEventListener(\"click\", function () {\r\n            if (!_this.gameStarted)\r\n                _this.gameStarted = true;\r\n            _this.nextWaveButton.disabled = true;\r\n            _this.nextWaveButton.innerText = \"wave in progress\";\r\n            _this.waveCount += 1;\r\n            if (_this.waveCount > 1)\r\n                _this.population.reproduce();\r\n            _this.waveSize = Math.floor(_this.population.population.length / 2);\r\n            if (_this.waveSize <= configuration_1.default.MIN_WAVE_SIZE)\r\n                _this.waveSize = Math.min(configuration_1.default.MIN_WAVE_SIZE, _this.population.population.length);\r\n            _this.waveInProgress = true;\r\n            _this.attackWave = _this.population.createAttackWave(_this.waveSize);\r\n        });\r\n    };\r\n    Game.prototype.initializeGrid = function () {\r\n        for (var y = 0; y < this.canvas.height; y += configuration_1.default.CELL_SIZE) {\r\n            for (var x = 0; x < this.canvas.width; x += configuration_1.default.CELL_SIZE) {\r\n                this.grid.push(new cell_1.default(this, x, y, configuration_1.default.CELL_SIZE, configuration_1.default.CELL_SIZE));\r\n            }\r\n        }\r\n    };\r\n    Game.prototype.handleGameStatsBar = function () {\r\n        this.stats.innerText =\r\n            \"resources: \" +\r\n                this.numResources +\r\n                \" \" +\r\n                \"kills: \" +\r\n                this.numKills +\r\n                \" \" +\r\n                \"wave: \" +\r\n                this.waveCount +\r\n                \" \" +\r\n                \"population: \" +\r\n                (this.population.population.length +\r\n                    this.aliens.size +\r\n                    this.attackWave.length);\r\n    };\r\n    Game.prototype.handleGrid = function () {\r\n        var e_1, _a;\r\n        try {\r\n            for (var _b = __values(this.grid), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                var cell = _c.value;\r\n                cell.update();\r\n                cell.draw();\r\n            }\r\n        }\r\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n        finally {\r\n            try {\r\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\r\n            }\r\n            finally { if (e_1) throw e_1.error; }\r\n        }\r\n    };\r\n    Game.prototype.handleProjectiles = function () {\r\n        var temp = [];\r\n        this.projectiles.forEach(function (projectile) {\r\n            projectile.update();\r\n            projectile.draw();\r\n            if (!projectile.destroyed())\r\n                temp.push(projectile);\r\n        });\r\n        this.projectiles = temp;\r\n    };\r\n    Game.prototype.handleTowers = function () {\r\n        this.towers.forEach(function (tower) {\r\n            tower.update();\r\n            tower.draw();\r\n        });\r\n    };\r\n    Game.prototype.handleAliens = function () {\r\n        var _this = this;\r\n        this.aliens.forEach(function (alien, key) {\r\n            alien.update();\r\n            alien.draw();\r\n            if (alien.x + alien.width < 0) {\r\n                alien.x = _this.canvas.width;\r\n                _this.population.population.push(alien);\r\n                _this.aliens.delete(key);\r\n            }\r\n            if (!alien.alive()) {\r\n                _this.aliens.delete(key);\r\n                _this.createFloatingText(\"+\" + alien.lootValue, alien.x, alien.y);\r\n                _this.numResources += alien.lootValue;\r\n                _this.numKills += 1;\r\n            }\r\n        });\r\n        if (this.waveInProgress &&\r\n            Date.now() - this.lastSpawnedTime > this.alienSpawnInterval) {\r\n            var temp = this.attackWave.pop();\r\n            if (temp) {\r\n                this.aliens.set(temp.id, temp);\r\n                this.lastSpawnedTime = Date.now();\r\n                if (this.alienSpawnInterval > configuration_1.default.MIN_SPAWN_INTERVAL)\r\n                    this.alienSpawnInterval -= configuration_1.default.SPAWN_INTERVAL_DECREMENT;\r\n            }\r\n        }\r\n    };\r\n    Game.prototype.handleAttackWave = function () {\r\n        if (this.gameStarted && !this.waveInProgress) {\r\n            this.nextWaveButton.disabled = false;\r\n            this.nextWaveButton.innerText = \"next wave\";\r\n        }\r\n        if (this.attackWave.length == 0 && this.aliens.size == 0) {\r\n            this.waveInProgress = false;\r\n        }\r\n    };\r\n    Game.prototype.handleFloatingTexts = function () {\r\n        var temp = [];\r\n        this.floatingTexts.forEach(function (floatingText) {\r\n            floatingText.update();\r\n            floatingText.draw();\r\n            if (!floatingText.expired()) {\r\n                temp.push(floatingText);\r\n            }\r\n        });\r\n        this.floatingTexts = temp;\r\n    };\r\n    Game.prototype.createFloatingText = function (text, x, y, color) {\r\n        if (color === void 0) { color = \"black\"; }\r\n        this.floatingTexts.push(new floatingText_1.default(this, text, x, y, 15, color));\r\n    };\r\n    return Game;\r\n}());\r\nexports.default = Game;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar GameObject = /** @class */ (function () {\r\n    function GameObject(game, x, y, width, height) {\r\n        this.game = game;\r\n        this.x = x;\r\n        this.y = y;\r\n        this.width = width;\r\n        this.height = height;\r\n    }\r\n    GameObject.prototype.update = function () { };\r\n    GameObject.prototype.draw = function () { };\r\n    return GameObject;\r\n}());\r\nexports.default = GameObject;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar configuration_1 = require(\"./configuration\");\r\nvar Mouse = /** @class */ (function () {\r\n    function Mouse() {\r\n        this.x = configuration_1.default.MOUSE_CONFIG.MOUSE_STARTING_X;\r\n        this.y = configuration_1.default.MOUSE_CONFIG.MOUSE_STARTING_Y;\r\n        this.width = configuration_1.default.MOUSE_CONFIG.MOUSE_WIDTH;\r\n        this.height = configuration_1.default.MOUSE_CONFIG.MOUSE_HEIGHT;\r\n    }\r\n    Mouse.prototype.update = function (x, y, w, h) {\r\n        if (w === void 0) { w = this.width; }\r\n        if (h === void 0) { h = this.height; }\r\n        this.x = x;\r\n        this.y = y;\r\n        this.width = w;\r\n        this.height = h;\r\n    };\r\n    return Mouse;\r\n}());\r\nexports.default = Mouse;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar configuration_1 = require(\"./configuration\");\r\nvar alien_1 = require(\"./alien\");\r\nvar util_1 = require(\"./util\");\r\nvar Population = /** @class */ (function () {\r\n    function Population(game, n) {\r\n        this.game = game;\r\n        this.population = [];\r\n        this.maxHeight = configuration_1.default.ALIEN_TRAITS.MAX_HEIGHT;\r\n        this.minHeight = configuration_1.default.ALIEN_TRAITS.MIN_HEIGHT;\r\n        this.maxWidth = configuration_1.default.ALIEN_TRAITS.MAX_WIDTH;\r\n        this.minWidth = configuration_1.default.ALIEN_TRAITS.MIN_WIDTH;\r\n        this.maxHealth = configuration_1.default.ALIEN_TRAITS.MAX_HEALTH;\r\n        this.minHealth = configuration_1.default.ALIEN_TRAITS.MIN_HEALTH;\r\n        this.maxSpeed = configuration_1.default.ALIEN_TRAITS.MAX_SPEED;\r\n        this.minSpeed = configuration_1.default.ALIEN_TRAITS.MIN_SPEED;\r\n        this.initializePopulation(n);\r\n    }\r\n    Population.prototype.initializePopulation = function (n) {\r\n        for (var i = 0; i < n; i++) {\r\n            var height = util_1.randomNumberInRange(this.minHeight, this.maxHeight);\r\n            this.population.push(new alien_1.default(this.game, util_1.randomNumberInRange(height, this.game.canvas.height - height), util_1.randomNumberInRange(this.minWidth, this.maxWidth), height, util_1.randomNumberInRange(this.minHealth, this.maxHealth), util_1.randomNumberInRange(this.minSpeed, this.maxSpeed)));\r\n        }\r\n    };\r\n    Population.prototype.shufflePopulation = function () {\r\n        // Fisher-Yates shuffle algorithm\r\n        var count = this.population.length;\r\n        var randomNumber = 0;\r\n        var temp;\r\n        while (count) {\r\n            randomNumber = (Math.random() * count--) | 0;\r\n            temp = this.population[count];\r\n            this.population[count] = this.population[randomNumber];\r\n            this.population[randomNumber] = temp;\r\n        }\r\n    };\r\n    Population.prototype.createAttackWave = function (n) {\r\n        this.shufflePopulation();\r\n        var attackWave = [];\r\n        for (var i = 0; i < n; i++) {\r\n            var temp = this.population.pop();\r\n            if (!temp)\r\n                break;\r\n            attackWave.push(temp);\r\n        }\r\n        return attackWave;\r\n    };\r\n    Population.prototype.reproduce = function () {\r\n        var _this = this;\r\n        var offspring = [];\r\n        var start = 0;\r\n        var mid = Math.floor(this.population.length / 2);\r\n        while (mid < this.population.length) {\r\n            var parent1 = this.population[start];\r\n            var parent2 = this.population[mid];\r\n            var height = util_1.randomNumberInRange(parent1.height, parent2.height);\r\n            offspring.push(new alien_1.default(this.game, util_1.randomNumberInRange(height, this.game.canvas.height - height), util_1.randomNumberInRange(parent1.width, parent2.width), height, util_1.randomNumberInRange(parent1.maxHealth, parent2.maxHealth), util_1.randomNumberInRange(parent1.speed, parent2.speed)));\r\n            start++;\r\n            mid++;\r\n        }\r\n        offspring.forEach(function (child) {\r\n            _this.population.push(child);\r\n        });\r\n    };\r\n    return Population;\r\n}());\r\nexports.default = Population;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __values = (this && this.__values) || function(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar gameObject_1 = require(\"./gameObject\");\r\nvar util_1 = require(\"./util\");\r\nvar Projectile = /** @class */ (function (_super) {\r\n    __extends(Projectile, _super);\r\n    function Projectile(game, x, y, width, height, angle, speed, power, range) {\r\n        var _this = _super.call(this, game, x, y, width, height) || this;\r\n        _this.game = game;\r\n        _this.x = x;\r\n        _this.y = y;\r\n        _this.startingX = x;\r\n        _this.startingY = y;\r\n        _this.angle = angle;\r\n        _this.speed = speed;\r\n        _this.power = power;\r\n        _this.range = range;\r\n        _this.width = width;\r\n        _this.height = height;\r\n        return _this;\r\n    }\r\n    Projectile.prototype.checkOutOfRange = function () {\r\n        var deltaX = Math.abs(this.x - this.startingX);\r\n        var deltaY = Math.abs(this.y - this.startingY);\r\n        var dist = Math.sqrt(Math.pow(deltaX, 2) + Math.pow(deltaY, 2));\r\n        return dist > this.range;\r\n    };\r\n    Projectile.prototype.destroyed = function () {\r\n        var e_1, _a;\r\n        if (this.checkOutOfRange())\r\n            return true;\r\n        if (this.x > this.game.canvas.width ||\r\n            this.x < 0 ||\r\n            this.y > this.game.canvas.height ||\r\n            this.y < 0) {\r\n            return true;\r\n        }\r\n        try {\r\n            for (var _b = __values(this.game.aliens.values()), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                var alien = _c.value;\r\n                if (util_1.collisionDetection(this, alien)) {\r\n                    alien.health -= this.power;\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n        finally {\r\n            try {\r\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\r\n            }\r\n            finally { if (e_1) throw e_1.error; }\r\n        }\r\n        return false;\r\n    };\r\n    Projectile.prototype.update = function () {\r\n        this.x += this.speed * Math.cos(this.angle);\r\n        this.y += this.speed * Math.sin(this.angle);\r\n    };\r\n    Projectile.prototype.draw = function () {\r\n        this.game.ctx.save();\r\n        this.game.ctx.fillStyle = \"black\";\r\n        this.game.ctx.beginPath();\r\n        this.game.ctx.arc(this.x, this.y, this.width, 0, Math.PI * 2);\r\n        this.game.ctx.fill();\r\n        this.game.ctx.restore();\r\n    };\r\n    return Projectile;\r\n}(gameObject_1.default));\r\nexports.default = Projectile;\r\n","\"use strict\";\r\nvar __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n    return function (d, b) {\r\n        if (typeof b !== \"function\" && b !== null)\r\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __values = (this && this.__values) || function(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.FlamethrowerTower = exports.MachineGunTower = void 0;\r\nvar configuration_1 = require(\"./configuration\");\r\nvar projectile_1 = require(\"./projectile\");\r\nvar gameObject_1 = require(\"./gameObject\");\r\nvar util_1 = require(\"./util\");\r\nvar Tower = /** @class */ (function (_super) {\r\n    __extends(Tower, _super);\r\n    function Tower(game, x, y, cost) {\r\n        var _this = _super.call(this, game, x, y, configuration_1.default.CELL_SIZE - configuration_1.default.CELL_GAP * 2, configuration_1.default.CELL_SIZE - configuration_1.default.CELL_GAP * 2) || this;\r\n        _this.level = 1;\r\n        _this.cost = cost;\r\n        return _this;\r\n    }\r\n    return Tower;\r\n}(gameObject_1.default));\r\nexports.default = Tower;\r\nvar MachineGunTower = /** @class */ (function (_super) {\r\n    __extends(MachineGunTower, _super);\r\n    function MachineGunTower(game, x, y) {\r\n        var _this = _super.call(this, game, x, y, configuration_1.default.MACHINE_GUN_TOWER_STATS.cost[0]) || this;\r\n        _this.range = configuration_1.default.MACHINE_GUN_TOWER_STATS.range[0];\r\n        _this.cooldown = configuration_1.default.MACHINE_GUN_TOWER_STATS.cooldown[0];\r\n        _this.projectileSpeed = configuration_1.default.MACHINE_GUN_TOWER_STATS.projectileSpeed[0];\r\n        _this.power = configuration_1.default.MACHINE_GUN_TOWER_STATS.power[0];\r\n        _this.angle = 0;\r\n        _this.target = null;\r\n        _this.lastFired = Date.now();\r\n        return _this;\r\n    }\r\n    MachineGunTower.prototype.upgrade = function () {\r\n        if (this.level < 3) {\r\n            this.level += 1;\r\n            this.range = configuration_1.default.MACHINE_GUN_TOWER_STATS.range[this.level - 1];\r\n            this.cooldown = configuration_1.default.MACHINE_GUN_TOWER_STATS.cooldown[this.level - 1];\r\n            this.projectileSpeed =\r\n                configuration_1.default.MACHINE_GUN_TOWER_STATS.projectileSpeed[this.level - 1];\r\n            this.power = configuration_1.default.MACHINE_GUN_TOWER_STATS.power[this.level - 1];\r\n        }\r\n    };\r\n    MachineGunTower.prototype.findTarget = function () {\r\n        var e_1, _a;\r\n        if (this.target && !this.game.aliens.has(this.target.id))\r\n            this.target = null;\r\n        if (!this.target) {\r\n            try {\r\n                for (var _b = __values(this.game.aliens.values()), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                    var alien = _c.value;\r\n                    if (util_1.calculateDistance(this, alien) < this.range) {\r\n                        this.target = alien;\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n            finally {\r\n                try {\r\n                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\r\n                }\r\n                finally { if (e_1) throw e_1.error; }\r\n            }\r\n        }\r\n    };\r\n    MachineGunTower.prototype.changeAngle = function () {\r\n        if (this.target) {\r\n            var dx = this.x - this.target.x;\r\n            var dy = this.y - this.target.y;\r\n            this.angle = Math.atan2(dy, dx) - Math.PI;\r\n        }\r\n    };\r\n    MachineGunTower.prototype.checkFire = function () {\r\n        if (this.target) {\r\n            var now = Date.now();\r\n            var distanceToTarget = util_1.calculateDistance(this, this.target);\r\n            if (this.range > distanceToTarget) {\r\n                if (now - this.lastFired > this.cooldown) {\r\n                    this.game.projectiles.push(new projectile_1.default(this.game, this.x + this.width / 2, this.y + this.height / 2, 6, 6, this.angle, this.projectileSpeed, this.power, this.game.canvas.width));\r\n                    this.lastFired = now;\r\n                }\r\n            }\r\n            else {\r\n                this.target = null;\r\n            }\r\n        }\r\n    };\r\n    MachineGunTower.prototype.draw = function () {\r\n        this.game.ctx.save();\r\n        this.game.ctx.fillStyle = \"blue\";\r\n        this.game.ctx.translate(this.x + this.width / 2, this.y + this.height / 2);\r\n        this.game.ctx.rotate(this.angle);\r\n        this.game.ctx.translate(-(this.x + this.width / 2), -(this.y + this.height / 2));\r\n        this.game.ctx.fillRect(this.x, this.y, this.width, this.height);\r\n        this.game.ctx.fillStyle = \"black\";\r\n        this.game.ctx.font = \"30px Arial\";\r\n        var barrel;\r\n        switch (this.level) {\r\n            case 2:\r\n                barrel = \"==\";\r\n                break;\r\n            case 3:\r\n                barrel = \"===\";\r\n                break;\r\n            default:\r\n                barrel = \"=\";\r\n                break;\r\n        }\r\n        this.game.ctx.fillText(barrel, this.x + 15, this.y + 30);\r\n        if (this.game.mouse.x &&\r\n            this.game.mouse.y &&\r\n            util_1.collisionDetection(this, this.game.mouse)) {\r\n            this.game.ctx.beginPath();\r\n            var centerX = this.x + this.width / 2;\r\n            var centerY = this.y + this.height / 2;\r\n            this.game.ctx.arc(centerX, centerY, this.range, 0, Math.PI * 2);\r\n            this.game.ctx.fillStyle = \"rgba(255, 0, 0, 0.1)\";\r\n            this.game.ctx.fill();\r\n        }\r\n        this.game.ctx.restore();\r\n    };\r\n    MachineGunTower.prototype.update = function () {\r\n        this.findTarget();\r\n        this.changeAngle();\r\n        this.checkFire();\r\n    };\r\n    return MachineGunTower;\r\n}(Tower));\r\nexports.MachineGunTower = MachineGunTower;\r\nvar FlamethrowerTower = /** @class */ (function (_super) {\r\n    __extends(FlamethrowerTower, _super);\r\n    function FlamethrowerTower(game, x, y) {\r\n        var _this = _super.call(this, game, x, y, configuration_1.default.FLAMETHROWER_TOWER_STATS.cost[0]) || this;\r\n        _this.range = configuration_1.default.FLAMETHROWER_TOWER_STATS.range[0];\r\n        _this.cooldown = configuration_1.default.FLAMETHROWER_TOWER_STATS.cooldown[0];\r\n        _this.projectileSpeed = configuration_1.default.FLAMETHROWER_TOWER_STATS.projectileSpeed[0];\r\n        _this.power = configuration_1.default.FLAMETHROWER_TOWER_STATS.power[0];\r\n        _this.angle = 0;\r\n        _this.target = null;\r\n        _this.lastFired = Date.now();\r\n        return _this;\r\n    }\r\n    FlamethrowerTower.prototype.findTarget = function () {\r\n        var e_2, _a;\r\n        if (this.target && !this.game.aliens.has(this.target.id))\r\n            this.target = null;\r\n        if (!this.target) {\r\n            try {\r\n                for (var _b = __values(this.game.aliens.values()), _c = _b.next(); !_c.done; _c = _b.next()) {\r\n                    var alien = _c.value;\r\n                    if (util_1.calculateDistance(this, alien) < this.range) {\r\n                        this.target = alien;\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n            catch (e_2_1) { e_2 = { error: e_2_1 }; }\r\n            finally {\r\n                try {\r\n                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\r\n                }\r\n                finally { if (e_2) throw e_2.error; }\r\n            }\r\n        }\r\n    };\r\n    FlamethrowerTower.prototype.upgrade = function () {\r\n        if (this.level < 3) {\r\n            this.level += 1;\r\n            this.range = configuration_1.default.FLAMETHROWER_TOWER_STATS.range[this.level - 1];\r\n            this.cooldown = configuration_1.default.FLAMETHROWER_TOWER_STATS.cooldown[this.level - 1];\r\n            this.projectileSpeed =\r\n                configuration_1.default.FLAMETHROWER_TOWER_STATS.projectileSpeed[this.level - 1];\r\n            this.power = configuration_1.default.FLAMETHROWER_TOWER_STATS.power[this.level - 1];\r\n        }\r\n    };\r\n    FlamethrowerTower.prototype.changeAngle = function () {\r\n        if (this.target) {\r\n            var dx = this.x - this.target.x;\r\n            var dy = this.y - this.target.y;\r\n            this.angle = Math.atan2(dy, dx) - Math.PI;\r\n        }\r\n    };\r\n    FlamethrowerTower.prototype.checkFire = function () {\r\n        if (this.target) {\r\n            var now = Date.now();\r\n            var distanceToTarget = util_1.calculateDistance(this, this.target);\r\n            if (this.range > distanceToTarget) {\r\n                if (now - this.lastFired > this.cooldown) {\r\n                    this.game.projectiles.push(new projectile_1.default(this.game, this.x + this.width / 2, this.y + this.height / 2, configuration_1.default.FLAMETHROWER_TOWER_STATS.projectileSize[this.level - 1], configuration_1.default.FLAMETHROWER_TOWER_STATS.projectileSize[this.level - 1], this.angle, this.projectileSpeed, this.power, this.range));\r\n                    this.lastFired = now;\r\n                }\r\n            }\r\n            else {\r\n                this.target = null;\r\n            }\r\n        }\r\n    };\r\n    FlamethrowerTower.prototype.draw = function () {\r\n        this.game.ctx.save();\r\n        this.game.ctx.fillStyle = \"orange\";\r\n        this.game.ctx.translate(this.x + this.width / 2, this.y + this.height / 2);\r\n        this.game.ctx.rotate(this.angle);\r\n        this.game.ctx.translate(-(this.x + this.width / 2), -(this.y + this.height / 2));\r\n        this.game.ctx.fillRect(this.x, this.y, this.width, this.height);\r\n        this.game.ctx.fillStyle = \"black\";\r\n        this.game.ctx.font = \"30px Arial\";\r\n        var barrel;\r\n        switch (this.level) {\r\n            case 2:\r\n                barrel = \"==\";\r\n                break;\r\n            case 3:\r\n                barrel = \"===\";\r\n                break;\r\n            default:\r\n                barrel = \"=\";\r\n                break;\r\n        }\r\n        this.game.ctx.fillText(barrel, this.x + 15, this.y + 30);\r\n        if (this.game.mouse.x &&\r\n            this.game.mouse.y &&\r\n            util_1.collisionDetection(this, this.game.mouse)) {\r\n            this.game.ctx.beginPath();\r\n            var centerX = this.x + this.width / 2;\r\n            var centerY = this.y + this.height / 2;\r\n            this.game.ctx.arc(centerX, centerY, this.range, 0, Math.PI * 2);\r\n            this.game.ctx.fillStyle = \"rgba(255, 0, 0, 0.1)\";\r\n            this.game.ctx.fill();\r\n        }\r\n        this.game.ctx.restore();\r\n    };\r\n    FlamethrowerTower.prototype.update = function () {\r\n        this.findTarget();\r\n        this.changeAngle();\r\n        this.checkFire();\r\n    };\r\n    return FlamethrowerTower;\r\n}(Tower));\r\nexports.FlamethrowerTower = FlamethrowerTower;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.calculateDistance = exports.randomNumberInRange = exports.collisionDetection = void 0;\r\nfunction collisionDetection(first, second) {\r\n    if (first.x >= second.x + second.width ||\r\n        second.x >= first.x + first.width ||\r\n        first.y >= second.y + second.height ||\r\n        second.y >= first.y + first.height) {\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\nexports.collisionDetection = collisionDetection;\r\nfunction randomNumberInRange(a, b) {\r\n    var min = Math.min(a, b);\r\n    var max = Math.max(a, b);\r\n    return Math.random() * (max - min) + min;\r\n}\r\nexports.randomNumberInRange = randomNumberInRange;\r\nfunction calculateDistance(first, second) {\r\n    var deltaX = Math.abs(first.x - second.x);\r\n    var deltaY = Math.abs(first.y - second.y);\r\n    return Math.sqrt(Math.pow(deltaX, 2) + Math.pow(deltaY, 2));\r\n}\r\nexports.calculateDistance = calculateDistance;\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar dom_1 = require(\"./dom\");\r\nvar game_1 = require(\"./game\");\r\nvar dom = new dom_1.default();\r\nvar game = new game_1.default(dom);\r\ngame.start();\r\n"],"sourceRoot":""}